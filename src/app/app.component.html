<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header" #layoutContainer [class.dark-mode]="darkMode">
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row header-row">
            <span class="mdl-layout-title">DBL 1D</span>

            <app-visualization-picker [visualizers]="visualizers" (select)="addVisualization($event)"></app-visualization-picker>

            <div>
                <app-loader [hidden]="!isLoading() || showFullScreenLoader"></app-loader>
                <app-general-settings-button></app-general-settings-button>
                <app-help-button [container]="layoutContainer"></app-help-button>
                <app-upload-tool (newContent)="parseTree($event)"></app-upload-tool>
            </div>
        </div>

        <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
            <a *ngFor="let tab of tabs;" (click)="switchTab(tab)" class="mdl-layout__tab-app" [class.is-active]="tab.active">
                {{ tab.visualizer?.getName() }}

                <i class="material-icons close-tab" (click)="closeTab(tab)">close</i>
            </a>
        </div>
    </header>
    <div class="mdl-layout__drawer">
        <span class="mdl-layout-title">Menu</span>
    </div>
    <main class="mdl-layout__content">
        <div class="holder">
            <div class="holder-app">
                <section *ngFor="let tab of tabs;" class="mdl-layout__tab-panel full-height" [class.is-active]="tab.active">
                    <div class="page-content full-height">
                        <app-window [tree]="tree" [visualizer]="tab.visualizer" [tab]="tab" (loading)="updateLoading($event)" (redrawAll)="redrawAllTabs()" [snackbar]="snackbar"></app-window>
                    </div>
                </section>
            </div>
            <div class="holder-sidebar" [hidden]="!tree">
                <app-sidebar [tree]="tree" (reset)="restoreTree()"></app-sidebar>
            </div>
        </div>

        <app-welcome-page [visualizers]="visualizers" [hidden]="tabs.length > 0"></app-welcome-page>
    </main>

    <dialog class="mdl-dialog full-screen-loader" #fullScreenLoader tabindex="-1">
        <div class="mdl-dialog__content">
            <app-loader></app-loader>
        </div>
    </dialog>

    <div #snackbar class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
    </div>
</div>
